# Based on the i3 config file (v4)
# Martin B. Fraga
# Please see http://i3wm.org/docs/userguide.html for a complete reference!
# REQUIRES:
#  xset
#  numlockx
#  i3lock (aliased to slock)
#  nm-applet
#  Telegram
#  dunst
#  compton
#  nitrogen
#
# font-awesome-ttf (for icon font


##########
# Defaults
##########


# disable mouse operations

bindsym button4 nop
bindsym button5 nop


# workspace names

set $ws1 "1"
set $ws2 "2"
set $ws3 "3"
set $ws4 "4"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8"
set $ws9 "9"
set $wss "∞"


# modifier keys
# Main mod key is Super key
set $mod Mod4
# Secondary mod key (Used generally for inverse operations)
set $rmod Mod4+Shift


# applications
set $terminal st
set $editor nvim
set $browser firefox


##########
# Settings
##########


focus_follows_mouse no
#show_marks yes
mouse_warping none
hide_edge_borders smart
#workspace_auto_back_and_forth yes

######
# GAPS
######

#smart_gaps on


###################
# Apps to Autostart
###################
#exec --no-startup-id xset s off
#exec --no-startup-id xset dpms 600 900 1200 &
#exec --no-startup-id xautolock -time 10 -locker slock -notify 30
exec --no-startup-id numlockx off

exec --no-startup-id nitrogen --restore
exec ~/opt/Telegram/Telegram -startintray &
#exec nm-applet &
#exec eventdctl --auto-spawn notification-daemon switch xcb ${DISPLAY} &
#exec --no-startup-id dunst
#exec --no-startup-id ~/scripts/setmon external
#exec --no-startup-id gpaste


# Compton
exec --no-startup-id compton
bindsym Ctrl+Shift+F12 exec ~/bin/compton-toggle


#============
# KEYBINDINGS
#============
#
# Application Keybindings
#------------------------
# Start a terminal
bindsym $mod+Return exec $terminal
bindsym $mod+t exec $terminal
#bindsym $mod+f exec "notify-send -t 1 'opening firefox...'; firefox"
#bindsym $mod+e exec QT_QPA_PLATFORMTHEME="qt5ct" dolphin
#bindsym $mod+e exec "notify-send -t 1 'opening dolphin...'; dolphin"
#bindsym $rmod+n exec termite --name ncmpcpp -e ncmpcpp playlist
# Start application launcher 
bindsym $mod+d exec rofi -show run
bindsym $mod+q exec qnr
bindsym $mod+f exec mbmain
#bindsym $mod+g exec rofi -show window
#bindsym Mod1+Tab exec rofi -show window
#bindsym $rmod+c exec  ~/bin/rofipaste
#bindsym $rmod+m exec clerk
#bindsym $rmod+h exec termite --name htop -e htop
#bindsym $rmod+c exec telegram
#bindsym $rmod+q exec qnr

#bindsym $rmod+c exec gpaste-client get 0
# There also is the (new) i3-dmenu-desktop which only displays applications
# shipping a .desktop file. It is a wrapper around dmenu, so you need that
# installed.
#bindsym $mod+d exec --no-startup-id j4-dmenu-desktop --dmenu="dmenu -b -i"
# Lock Screen
bindsym Ctrl+$mod+l exec --no-startup-id i3lock

bindcode 108 exec special_characters
#
#
# Window Management Keybindings
#------------------------------
# kill focused window
bindsym $rmod+q kill
bindsym Mod1+F4 kill
# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right
# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right
# cycle windows (for single hand)
#bindsym Mod1+Tab focus left
#bindsym $mod+Tab focus left
#bindsym Mod1+` focus right

# move focused window
bindsym $rmod+h move left
bindsym $rmod+j move down
bindsym $rmod+k move up
bindsym $rmod+l move right
# alternatively, you can use the cursor keys:
bindsym $rmod+Left move left
bindsym $rmod+Down move down
bindsym $rmod+Up move up
bindsym $rmod+Right move right

# split in horizontal orientation
bindsym $mod+b split h
# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $rmod+f fullscreen
# change container layout (stacked, tabbed, toggle split)
bindsym $rmod+s layout stacking
bindsym $rmod+w layout tabbed
bindsym $rmod+e layout toggle split

# Floating stuff
# toggle tiling / floating
bindsym $rmod+space floating toggle
# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# Focus
# focus the parent container
bindsym $mod+a focus parent
# focus the child container
bindsym $rmod+a focus child
bindsym $mod+c focus child

#
# Workspace Management Keybindings
#---------------------------------
# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
# Fix them to monitor 1
workspace $ws1 output DP-0.8
workspace $ws2 output DP-0.8
workspace $ws3 output DP-0.8
workspace $ws4 output DP-0.8
workspace $ws5 output DP-0.8
workspace $ws6 output DP-0.8


# Secondary Monitor
bindsym $mod+grave workspace $wss
bindsym $mod+Shift+grave move container to workspace $wss
workspace $wss output DVI-D-0

# switch between the current and the previously focused one
#bindsym $mod+n workspace back_and_forth
#bindsym $mod+Shift+n move container to workspace back_and_forth
#bindsym $mod+Tab workspace next


# scratchpad
bindsym $rmod+minus move scratchpad
bindsym $rmod+plus scratchpad show


# resize window (you can also use the mouse for that)

bindsym $mod+w mode "window"
#bindsym $mod+w exec "rofi -show blezz -modi blezz -auto-select -matching normal -blezz-config ~/.config/rofi/blezz_i3 -no-lazy-grab"
mode "window" {
      # These bindings trigger as soon as you enter the resize mode

      # Pressing left will shrink the window’s width.
      # Pressing right will grow the window’s width.
      # Pressing up will shrink the window’s height.
      # Pressing down will grow the window’s height.
      bindsym h resize shrink width 10 px or 10 ppt
      bindsym j resize grow height 10 px or 10 ppt
      bindsym k resize shrink height 10 px or 10 ppt
      bindsym l resize grow width 10 px or 10 ppt

      bindsym f fullscreen, mode "default"
      bindsym s layout stacking, mode "default"
      bindsym w layout tabbed, mode "default"
      bindsym t layout tabbed, mode "default"
      bindsym e layout toggle split, mode "default"
      bindsym r reload, mode "default"
      bindsym Shift+r restart, mode "default"


      # same bindings, but for the arrow keys
      bindsym Left resize shrink width 10 px or 10 ppt
      bindsym Down resize grow height 10 px or 10 ppt
      bindsym Up resize shrink height 10 px or 10 ppt
      bindsym Right resize grow width 10 px or 10 ppt

      bindsym Shift+question exec ~/.config/i3/resize_mode_help.sh

      # back to normal: Enter or Escape
      bindsym Return mode "default"
      bindsym Escape mode "default"
}

mode "move" {
   bindsym h move left 20px
   bindsym j move down 20px
   bindsym k move up 20px
   bindsym l move right 20px

   bindsym Shift+h move left 100px
   bindsym Shift+j move down 100px
   bindsym Shift+k move up 100px
   bindsym Shift+l move right 100px

   bindsym Mod1+h move left 10px
   bindsym Mod1+j move down 10px
   bindsym Mod1+k move up 10px
   bindsym Mod1+l move right 10

   bindsym Return mode "default"
   bindsym Escape mode "default"
}


mode "audio" {
   bindsym a exec false
   bindsym b exec false
   bindsym c exec false
   bindsym d exec false
   bindsym e exec false
   bindsym f exec false
   bindsym g exec false
   bindsym i exec false
   bindsym h exec "mpc prev && notify_mpcnp || mpc prev"
   bindsym j exec --no-startup-id amixer -D pulse set Master 3%- unmute 
   bindsym k exec --no-startup-id amixer -D pulse set Master 3%+ unmute 
   bindsym l exec "mpc next && notify_mpcnp || mpc next"
   bindsym m exec --no-startup-id amixer -q -D pulse set Master toggle
   bindsym n exec "notify_mpcnp"
   bindsym o exec false
   bindsym p exec mpc toggle
   bindsym q exec false
   bindsym s exec mpc stop
   bindsym t exec false
   bindsym u exec false
   bindsym v exec false
   bindsym w exec false
   bindsym y exec false
   bindsym z exec mpc random
   bindcode Shift+59 exec mpc prev # <
   bindcode Shift+59 exec "mpc prev && notify_mpcnp || mpc prev"
   bindcode Shift+60 exec mpc next # >
   bindcode Shift+60 exec "mpc next && notify_mpcnp || mpc next"

   bindsym Return mode "default"
   bindsym Escape mode "default"
   bindsym Shift+question exec ~/.config/i3/audio_mode_help.sh
}


bindsym $mod+r exec "rofi_launch ~/.config/rofi/rofi_launch_run"
bindsym $mod+o exec "rofi_launch ~/.config/rofi/rofi_launch_run"
#bindsym $mod+r mode "open"
#bindsym $mod+o mode "open"
#mode "open" {
#   bindsym t exec $terminal; mode "default"
#   bindsym f exec $browser; mode "default"
#   bindsym e exec dolphin; mode "default"
#   bindsym s exec speedcrunch; mode "default"
#   bindsym m exec mbmain; mode "default"
#   bindsym w exec mbmain; mode "default"
#   bindsym q exec qnr; mode "default"
#   bindsym c exec telegram; mode "default"
#   bindsym Return mode "default"
#   bindsym Escape mode "default"
#}

#bindsym $mod+w mode "modes"
mode "modes" {
   bindsym $mod+r mode "resize"
   bindsym r mode "resize"
   bindsym $mod+a mode "audio"
   bindsym a mode "audio"
   bindsym $mod+m mode "move"
   bindsym m mode "move"

   bindsym Return mode "default"
   bindsym Escape mode "default"
   }


#bindsym $mod+m mode "mouse"
#mode "mouse" {
#   bindsym h exec xdotool mousemove_relative --  -10 0
#   bindsym k exec xdotool mousemove_relative --  0 -10
#   bindsym j exec xdotool mousemove_relative --  0 10
#   bindsym l exec xdotool mousemove_relative --  10 0
#
#   bindsym Shift+h exec xdotool mousemove_relative --  -50 0
#   bindsym Shift+k exec xdotool mousemove_relative --  0 -50
#   bindsym Shift+j exec xdotool mousemove_relative --  0 50
#   bindsym Shift+l exec xdotool mousemove_relative --  50 0
#
#   bindsym Mod1+h exec xdotool mousemove_relative --  -5 0
#   bindsym Mod1+k exec xdotool mousemove_relative --  0 -5
#   bindsym Mod1+j exec xdotool mousemove_relative --  0 5
#   bindsym Mod1+l exec xdotool mousemove_relative --  5 0
#
#
#
#   # left click
#   bindsym d exec xdotool mousedown 1
#   bindsym u exec xdotool mouseup 1
#   bindsym space exec xdotool click 1
#
#   # right click
#   bindsym Shift+d exec xdotool mousedown 2
#   bindsym Shift+u exec xdotool mouseup 2
#   bindsym Shift+space exec xdotool click 2
#
#   # scroll wheel
#   bindsym w exec xdotool click 4
#   bindsym s exec xdotool click 5
#
#   # middle click
#   bindsym m exec xdotool click 3
#
#
#   bindsym Return mode "default"
#   bindsym Escape mode "default"
#}


# Monitor Management Keybindings
#-------------------------------
# cycle monitor configurations
bindsym $mod+p exec ~/scripts/setmon cycle
# manage multimonitor
bindsym $mod+Shift+x move workspace to output right

#
# Mouse-clicky settings
#----------------------
# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

bindsym --release button2 kill

######
# Misc
######
# reload the configuration file
#bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
#bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym Ctrl+Shift+e exec "i3-nagbar -t warning -m 'Do you really want to exit i3?' -b 'Yes, exit i3' 'i3-msg exit'"



#
# Volume Control
#---------------
bindsym $mod+F10 exec --no-startup-id amixer -D pulse set Master 3%+ unmute 
bindsym $mod+F9 exec --no-startup-id amixer -D pulse set Master 3%- unmute 
bindsym $mod+F8 exec amixer -q -D pulse set Master toggle



#
# Brightness Control
#-------------------
#bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
#bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

##########################
# Per-application Settings
##########################

for_window [window_role="pop-up"] floating enable
for_window [window_role="bubble"] floating enable
for_window [window_role="task_dialog"] floating enable
for_window [window_role="Preferences"] floating enable

for_window [window_type="dialog"] floating enable
for_window [window_type="menu"] floating enable

for_window [class="dota_linux"] none
for_window [class="Gpick"] floating enable
for_window [class="Pavucontrol"] floating enable, move position mouse
for_window [class="Tomboy"] floating enable
for_window [class="SpeedCrunch"] floating enable
assign [class="Steam"] 5
assign [class="Lutris"] 5
#for_window [class="it-unitn-ing-rista-Maud"] floating enable
#for_window [title="GNU Image Manipulation Program"] floating enable
#
for_window [title="Quick Format Citation"] floating enable

# for i3blocks
#bindsym --release Caps_Lock exec pkill -SIGRTMIN+11 i3blocks
#bindsym --release Num_Lock  exec pkill -SIGRTMIN+11 i3blocks
#


# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
#
#set $maincolor    #77aadb     # old blue
set $maincolor    #eac58d  # golden temple | 03
set $fgwhite      #ece3d0  # granite       | 15
set $blackdarkest #191a1d  # bg0           | 0,235
set $blackwidget  #26272c  # bg0_soft      | 236
set $blacksoft    #393b41  # bg2           | 239
set $darkgray     #707681  # gray+         | 07
set $urgentcolor  #ea4439  # night temple  | 10
set $darkurgent   #472b2a

bar {

   output DP-0.8
   status_command i3blocks
   position top #<top|bottom>

   bindsym button4 nop
   bindsym button5 nop
   workspace_buttons yes #<yes|no>
   hidden_state show #<hide|show>
   mode dock #<dock|hide|invisible>
   modifier Mod4
   tray_output DP-0.8 #none|primary|<output>

   font pango:DejaVu Sans Mono 12
   tray_padding 2
   separator_symbol "|"
   colors {
      separator $darkgray
      background $blackwidget
      statusline $fgwhite
      focused_workspace $maincolor $maincolor $blackdarkest
      active_workspace $blackwidget $blackwidget $maincolor
      inactive_workspace $blackwidget $blackwidget $darkgray
      urgent_workspace $urgentcolor $blackwidget $urgentcolor
   }
}

bar {
   output DVI-D-0
   status_command i3blocks
   position top #<top|bottom>

   bindsym button4 nop
   bindsym button5 nop
   workspace_buttons yes #<yes|no>
   hidden_state show #<hide|show>
   mode dock #<dock|hide|invisible>
   modifier Mod4
   tray_output DP-0.8 #none|primary|<output>

   font pango:DejaVu Sans Mono 9
   tray_padding 2
   separator_symbol "|"
   colors {
      separator $darkgray
      background $blackwidget
      statusline $fgwhite
      focused_workspace $maincolor $maincolor $blackdarkest
      active_workspace $blackwidget $blackwidget $maincolor
      inactive_workspace $blackwidget $blackwidget $darkgray
      urgent_workspace $urgentcolor $blackwidget $urgentcolor
   }

}

# look
font pango: DejaVu Sans Mono 10
new_window pixel 2
#new_float pixel 3
# new
#                        $border       $bg           $fg           $sel
client.focused           $maincolor    $maincolor    $blackwidget  $urgentcolor
client.focused_inactive  $blacksoft    $blacksoft    $maincolor    $darkurgent
client.unfocused         $blackwidget  $blackwidget  $darkgray     $blackdarkest
client.urgent            $urgentcolor  $urgentcolor  $blackdarkest $urgentcolor

#TESTING
bindsym $mod+m exec eventdctl nd dismiss oldest
bindsym $mod+Shift+m exec eventdctl nd dismiss all
bindsym $mod+n exec rofication-gui.py

